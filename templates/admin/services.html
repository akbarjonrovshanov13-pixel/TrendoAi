{% extends 'admin/base_admin.html' %}

{% block title %}Xizmatlar - Admin Panel{% endblock %}

{% block content %}
<div class="quick-actions">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>Xizmatlar</h2>
        <a href="{{ url_for('admin_service_new') }}" class="btn btn-primary">
            + Yangi Xizmat
        </a>
    </div>

    <table class="posts-table">
        <thead>
            <tr>
                <th width="60">Rasm</th>
                <th>Nomi</th>
                <th>Narxi</th>
                <th>Status</th>
                <th>Chegirma</th>
                <th width="120">Amallar</th>
            </tr>
        </thead>
        <tbody>
            {% for service in services %}
            <tr>
                <td>
                    {% if service.image_url %}
                    <img src="{{ service.image_url }}" alt=""
                        style="height: 40px; width: 40px; object-fit: cover; border-radius: 8px;">
                    {% else %}
                    <span style="font-size: 24px;">{{ service.icon }}</span>
                    {% endif %}
                </td>
                <td>
                    <b>{{ service.title }}</b><br>
                    <small style="color: var(--gray);">/services/{{ service.slug }}</small>
                </td>
                <td>{{ service.price }}</td>
                <td>
                    {% if service.is_active %}
                    <span class="category-tag" style="background: #d1fae5; color: #059669;">Faol</span>
                    {% else %}
                    <span class="category-tag" style="background: #f3f4f6; color: #6b7280;">Nofaol</span>
                    {% endif %}
                </td>
                <td>
                    {% if service.discount_percent > 0 %}
                    <span class="category-tag" style="background: #fee2e2; color: #dc2626;">-{{ service.discount_percent
                        }}%</span>
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td>
                    <div style="display: flex; gap: 8px;">
                        <a href="{{ url_for('admin_service_edit', service_id=service.id) }}" class="btn"
                            style="padding: 6px 12px; font-size: 0.9rem; background: var(--light);">‚úèÔ∏è</a>
                        <form action="{{ url_for('admin_service_delete', service_id=service.id) }}" method="POST"
                            style="display:inline;" onsubmit="return confirm('O\'chirmoqchimisiz?');">
                            <button type="submit" class="btn btn-danger"
                                style="padding: 6px 12px; font-size: 0.9rem;">üóëÔ∏è</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if not services %}
    <div class="empty-message">
        <h3>Hozircha xizmatlar yo'q</h3>
        <p>Yangi xizmat qo'shish uchun yuqoridagi tugmani bosing.</p>
    </div>
    {% endif %}
</div>
{% endblock %}